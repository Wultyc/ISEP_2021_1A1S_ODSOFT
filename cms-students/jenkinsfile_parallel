#!/usr/bin/env groovy 

def credential_ID = 'a40dafd0-e2c0-4218-8eca-0f4eefc35f17'

def cms2Path = 'cms-students/'

pipeline {
	agent any

	stages {
	    stage('Start') {
			steps{
                echo "Running ${env.BUILD_ID} on ${env.JENKINS_URL} [Build number: ${env.BUILD_NUMBER}] [Workspace: ${env.WORKSPACE}]"
			}
        }
        stage('Checkout') {
			steps {
                git url: 'https://bitbucket.org/1160929/odsoft-m1b_g1.git',
                        branch: 'master',
                        credentialsId: '1fb50392-6260-431d-b1e6-ea6a12c9778c'
            }
        }
        stage('Build War file') {
			steps {
                dir(cms2Path) {
                    script {
                        sh 'gradle clean build'
                    }

                    archiveArtifacts warPath
                }
            }
        }
    }
} 

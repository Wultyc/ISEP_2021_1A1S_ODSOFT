#!/usr/bin/env groovy 

def credential_ID = 'a40dafd0-e2c0-4218-8eca-0f4eefc35f17'

def cms2Path = 'cms-students/'

pipeline {
	agent any

	stages {
	    stage('Stage 1') {
			steps{
                echo "Running ${env.BUILD_ID} on ${env.JENKINS_URL} [Build number: ${env.BUILD_NUMBER}] [Workspace: ${env.WORKSPACE}]"
			}
        }    
	    stage('Stage 2') {
			parallel {
                stage('Stage 2.1'){
                    steps{
				        echo 'Hello world (Parallel 1)'
			        }
                }
                stage('Stage 2.2'){    
                    steps{
				        echo 'Hello world (Parallel 2)'
			        }
                }
            }
		}
        stage('Unit tests'){
            steps{
                //Run the commands from withinthat directory!
                dir(cms2Path){
                    //script{
                        //Test this part
                        sh "gradle build"
                        //sh 'pwd'
                        sh "ls -la ${pwd()}"
                    //}
                } 
            }
        }
    }
} 

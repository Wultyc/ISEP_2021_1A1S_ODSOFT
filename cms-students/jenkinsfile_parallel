#!/usr/bin/env groovy 

def cms2Path = '/var/lib/jenkins/workspace/cms-2/cms-students'

pipeline {
	agent any

	stages {
	    stage('Stage 1') {
			steps{
                echo "Running ${env.BUILD_ID} on ${env.JENKINS_URL} [Build number: ${env.BUILD_NUMBER}] [Workspace: ${env.WORKSPACE}]"
			}
        }    
	    stage('Stage 2') {
			parallel {
                stage('Stage 2.1'){
                    steps{
				        echo 'Hello world (Parallel 1)'
			        }
                }
                stage('Stage 2.2'){    
                    steps{
				        echo 'Hello world (Parallel 2)'
			        }
                }
            }
		}
        stage('Unit tests'){
            steps{
                dir(cms2Path){
                    script{
                        //Test this part
                        sh './gradlew check'
                        //sh 'pwd'
                        sh 'ls -la'
                    }
                } 
            }
        }
    }
} 
